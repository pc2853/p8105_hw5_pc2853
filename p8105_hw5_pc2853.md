p8105\_hw5\_pc2853
================
pc2853
November 9, 2018

### Problem 1

-   Start with a dataframe containing all file names:

``` r
p1_file_name = 
  tibble(
    path = str_c("./data/", list.files("data/"))[1:20],
    name = list.files("data/")[1:20]
  )
```

-   Iterate over file names and read in data for each subject using purrr::map and saving the result as a new variable in the dataframe;
-   Tidy the result; manipulate file names to include control arm and subject ID, make sure weekly observations are “tidy”, and do any other tidying that’s necessary:

``` r
add_arm_id_and_read = function(x){
  read_csv(x) %>% 
    mutate(arm = str_sub(x, 8, 10), id = str_sub(x, 12, 13))
  
}

p1_data_tidy = 
  map_df(.x = p1_file_name$path, ~ add_arm_id_and_read(.x)) %>% 
  gather(key = week, value = weekly_observation, week_1:week_8) %>% 
  separate(week, into = c("remove", "week"), sep = "_") %>% 
  select(arm, id, everything(), -remove)
```

-   Make a spaghetti plot showing observations on each subject over time, and comment on differences between groups

``` r
p1_data_tidy %>% 
  mutate(arm_id = paste(arm, id, sep = "_")) %>% 
  ggplot(aes(x = week, y = weekly_observation, color = arm, group = arm_id)) +
    geom_line() +
    labs(
      title = "Observations on each subject over time",
      x = "Week",
      y = "Weekly observation",
      color = 'Arm'
    ) 
```

<img src="p8105_hw5_pc2853_files/figure-markdown_github/spaghetti plot-1.png" width="90%" />

Reading this plot, we know that the observations in experimental arm in generally larger than that in control arm, and only the experimental arm has increasing observations over time.

### Problem 2

-   Import the data:

``` r
p2_data = read_csv("./data/homicide-data.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   uid = col_character(),
    ##   reported_date = col_integer(),
    ##   victim_last = col_character(),
    ##   victim_first = col_character(),
    ##   victim_race = col_character(),
    ##   victim_age = col_character(),
    ##   victim_sex = col_character(),
    ##   city = col_character(),
    ##   state = col_character(),
    ##   lat = col_double(),
    ##   lon = col_double(),
    ##   disposition = col_character()
    ## )

-   describe the data:

The data has a dimension of 52179, 12. It contains variables that are victims' id, reported date, victims' last name, victims' first name, their race, age, sex, city, state, latitude, longitude and disposition.
